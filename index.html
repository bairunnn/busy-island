<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Busy Island</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- HOME PAGE -->
  <div id="page-home" class="page active">
    <div class="home-content">
      <h1 class="title-brand">Busy Island</h1>
      <p class="subtitle">MRT usage statistics summarised</p>
      <div class="cat-wrapper">
        <img src="./media/cats/cute cat doodles cat color 31.png" alt="Cute cat doodle" class="cat-img" />
      </div>
      <div class="btn-group">
        <button class="btn-main" onclick="navigateTo('page-minigame', this)">Mini Game</button>
        <button class="btn-main" onclick="navigateTo('page-browse', this); ensureDataLoaded().then(initBrowse);">Browse by Station</button>
      </div>
      <span class="link-about" onclick="navigateTo('page-about', this)">More Information</span>
    </div>
  </div>

  <!-- ABOUT PAGE -->
  <div id="page-about" class="page">
    <div class="page-header">
      <button class="btn-back" onclick="navigateTo('page-home', this)">
        <span class="arrow">&#8592;</span> Return to Home
      </button>
    </div>
    <div class="page-body">
      <h2 class="page-title">About</h2>
      <div class="about-content">
        <p>Data source: <a href="https://datamall.lta.gov.sg/content/datamall/en/search_datasets.html?searchText=origin%20destination%20train" target="_blank" rel="noopener">LTA DataMall</a>, Jan 2026 trip data</p>
        <p>Request for LTA DataMall access <a href="https://datamall.lta.gov.sg/content/datamall/en/request-for-api.html" target="_blank" rel="noopener">here</a></p>
        <p>Web app partially built with Claude Sonnet 4.6</p>
        <p>This project is not affiliated with the Land Transport Authority nor the Government of Singapore.</p>
      </div>
    </div>
  </div>

  <!-- MINI GAME PAGE -->
  <div id="page-minigame" class="page">
    <div class="page-header">
      <button class="btn-back" onclick="navigateTo('page-home', this)">
        <span class="arrow">&#8592;</span> Return to Home
      </button>
    </div>
    <div class="page-body game-body">

      <h2 class="page-title">Mini Game</h2>
      <p class="game-subtitle">Guess which station is busier than the other, and see how well you can score out of 10!</p>

      <!-- Day type toggle -->
      <div class="day-toggle-wrapper">
        <span class="toggle-label" id="label-weekdays">WEEKDAYS</span>
        <label class="toggle-switch">
          <input type="checkbox" id="day-toggle" />
          <span class="toggle-track"></span>
        </label>
        <span class="toggle-label" id="label-weekends">WEEKENDS</span>
      </div>

      <!-- Line dropdown -->
      <select class="line-select" id="line-select">
        <option value="MRT">All MRT lines</option>
        <option value="LRT">All LRT lines</option>
        <option value="EWL">East-West Line</option>
        <option value="NSL">North-South Line</option>
        <option value="NEL">North East Line</option>
        <option value="CCL">Circle Line</option>
        <option value="DTL">Downtown Line</option>
        <option value="TEL">Thomson-East Coast Line</option>
        <option value="PGLRT">Punggol LRT</option>
        <option value="SKLRT">Sengkang LRT</option>
        <option value="BPLRT">Bukit Panjang LRT</option>
      </select>

      <!-- Action buttons -->
      <div class="game-actions">
        <button class="btn-game btn-start" id="btn-start" onclick="startGame()">START GAME</button>
        <button class="btn-game btn-reset" id="btn-reset" onclick="resetGame()">RESET</button>
      </div>

      <!-- Scoreboard -->
      <div class="scoreboard" id="scoreboard" style="display:none;">
        <div class="score-item correct">CORRECT: <span id="score-correct">0</span></div>
        <div class="score-item wrong">WRONG: <span id="score-wrong">0</span></div>
      </div>

      <!-- Question area -->
      <div class="question-area" id="question-area" style="display:none;">
        <p class="question-label" id="question-label">Question 1</p>
        <p class="question-prompt">Which station has more passengers throughout the day?</p>

        <div class="station-row">
          <!-- Left station -->
          <button class="station-btn" id="btn-left" onclick="selectAnswer(0)">
            <div class="line-band" id="band-left"></div>
            <span class="station-name" id="name-left"></span>
          </button>

          <!-- Right station -->
          <button class="station-btn" id="btn-right" onclick="selectAnswer(1)">
            <div class="line-band" id="band-right"></div>
            <span class="station-name" id="name-right"></span>
          </button>
        </div>

        <!-- Result feedback -->
        <div class="result-feedback" id="result-feedback" style="display:none;"></div>

        <!-- Next button -->
        <button class="btn-game btn-next" id="btn-next" style="display:none;" onclick="nextQuestion()">Next Question</button>
      </div>

    </div>
  </div>

  <!-- BROWSE BY STATION PAGE -->
  <div id="page-browse" class="page">
    <div class="page-header">
      <button class="btn-back" onclick="navigateTo('page-home', this)">
        <span class="arrow">&#8592;</span> Return to Home
      </button>
    </div>
    <div class="page-body browse-body">

      <h2 class="page-title">Browse by Station</h2>

      <!-- Day type toggle -->
      <div class="day-toggle-wrapper">
        <span class="toggle-label" id="browse-label-weekdays">WEEKDAYS</span>
        <label class="toggle-switch">
          <input type="checkbox" id="browse-day-toggle" />
          <span class="toggle-track"></span>
        </label>
        <span class="toggle-label" id="browse-label-weekends">WEEKENDS</span>
      </div>

      <!-- Search bar -->
      <div class="search-wrapper">
        <input
          type="text"
          id="browse-search"
          class="browse-search"
          placeholder="Search station name..."
          autocomplete="off"
          spellcheck="false"
        />
        <ul class="search-suggestions" id="search-suggestions"></ul>
      </div>

      <!-- Station detail card -->
      <div class="station-card" id="station-card" style="display:none;">
        <div class="station-card-band" id="station-card-band"></div>
        <div class="station-card-body">
          <h3 class="station-card-name" id="station-card-name"></h3>
          <p class="station-card-desc">Daily passenger count for <span id="station-card-daytype"></span></p>
          <div class="station-card-stats">
            <div class="stat-item">
              <span class="stat-label">Tap-ins</span>
              <span class="stat-value" id="stat-tapin"></span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Tap-outs</span>
              <span class="stat-value" id="stat-tapout"></span>
            </div>
            <div class="stat-item stat-total">
              <span class="stat-label">Total</span>
              <span class="stat-value" id="stat-total"></span>
            </div>
          </div>
          <div class="station-card-lines" id="station-card-lines"></div>
        </div>
      </div>

    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>